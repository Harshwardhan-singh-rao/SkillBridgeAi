{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile within the SkillBridge AI platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "college": {
          "type": "string",
          "description": "Name of the user's college."
        },
        "skills": {
          "type": "array",
          "description": "List of skills the user possesses.",
          "items": {
            "type": "string"
          }
        },
        "goal": {
          "type": "string",
          "description": "User's career goal."
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "college",
        "skills",
        "goal"
      ]
    },
    "LearningPath": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LearningPath",
      "type": "object",
      "description": "Represents a personalized learning path generated for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the learning path."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N LearningPath)"
        },
        "steps": {
          "type": "array",
          "description": "Array of learning steps/modules.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userId",
        "steps"
      ]
    },
    "Mentor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Mentor",
      "type": "object",
      "description": "Represents an industry mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the mentor."
        },
        "name": {
          "type": "string",
          "description": "Mentor's full name."
        },
        "company": {
          "type": "string",
          "description": "Mentor's company."
        },
        "skills": {
          "type": "array",
          "description": "List of skills the mentor possesses.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "company",
        "skills"
      ]
    },
    "UserMentorConnection": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserMentorConnection",
      "type": "object",
      "description": "Represents the connection between a user and a mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user mentor connection."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N UserMentorConnection)"
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to Mentor. (Relationship: Mentor 1:N UserMentorConnection)"
        },
        "requestSession": {
          "type": "boolean",
          "description": "Whether or not a user has requested a session with a mentor"
        }
      },
      "required": [
        "id",
        "userId",
        "mentorId"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/userProfile",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile data. The path enforces ownership. Includes the 'userId' as a field in the documents. Only one user profile can exist per user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/learningPaths/{learningPathId}",
        "definition": {
          "entityName": "LearningPath",
          "schema": {
            "$ref": "#/backend/entities/LearningPath"
          },
          "description": "Stores learning paths specific to a user. The path enforces ownership, and the 'userId' field in the document denormalizes the relationship.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "learningPathId",
              "description": "The unique identifier of the learning path."
            }
          ]
        }
      },
      {
        "path": "/mentors/{mentorId}",
        "definition": {
          "entityName": "Mentor",
          "schema": {
            "$ref": "#/backend/entities/Mentor"
          },
          "description": "Stores mentor profiles.",
          "params": [
            {
              "name": "mentorId",
              "description": "The unique identifier of the mentor."
            }
          ]
        }
      },
      {
        "path": "/userMentorConnections/{userMentorConnectionId}",
        "definition": {
          "entityName": "UserMentorConnection",
          "schema": {
            "$ref": "#/backend/entities/UserMentorConnection"
          },
          "description": "Represents connections between users and mentors. Includes 'userId' and 'mentorId' fields.",
          "params": [
            {
              "name": "userMentorConnectionId",
              "description": "The unique identifier of the user mentor connection."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to ensure security, scalability, and ease of debugging, while adhering to the principles of Authorization Independence, Clarity of Intent, DBAC (Database-Based Access Control), and QAPs (Rules are not Filters).  Authorization Independence is achieved through denormalization, specifically by including authorization-related fields (such as `userId` for ownership) directly within documents. This avoids the need for `get()` calls in security rules, which can hinder atomic operations. Structural Segregation is applied by using dedicated collections for user-owned data (e.g., `/users/{userId}/learningPaths/{learningPathId}`). Access Modeling follows consistent patterns: path-based ownership for private user data. The structure uses explicit state modeling with dedicated fields (although not explicitly required in the data definitions). QAPs are supported by using structural segregation which allows efficient list operations, and by using path based rules. For instance, listing learning paths for a user is accomplished through a simple collection group query under a user document, all while retaining secure access.\n\nSpecifically:\n\n*   `/users/{userId}/userProfile`: Stores user profile data. The path itself enforces ownership, and security rules will ensure only the user can read/write their profile. Includes the `userId` as a field in the documents. Note: a uid can only have a single profile. Consider validating this in security rules or backend.\n*   `/users/{userId}/learningPaths/{learningPathId}`: Stores learning paths specific to a user. The path enforces ownership, and the `userId` field in the document denormalizes the relationship. Security rules will ensure only the user can read/write their learning paths.\n*   `/mentors/{mentorId}`: Stores mentor profiles.  This is a top-level collection, and security rules will control who can create/read/write mentor profiles (potentially admin roles).\n*   `/userMentorConnections/{userMentorConnectionId}`: Represents connections between users and mentors. Although not strictly following the `/users/{userId}/...` pattern, this setup allows for easier querying and management of connections.  The `userId` and `mentorId` fields denormalize the relationship.  Rules will need to ensure users can only create connections for themselves. Consider moving this under /users/{userId}/ connections, if querying is easier."
  }
}